# File Creation Feature - Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Interface                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FoldersList Component                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Folder Menu (3 dots)                                     â”‚ â”‚
â”‚  â”‚  â””â”€ Create in folder (submenu)                            â”‚ â”‚
â”‚  â”‚     â”œâ”€ ğŸ“ Folder                                          â”‚ â”‚
â”‚  â”‚     â”œâ”€ ğŸ“‹ List                                            â”‚ â”‚
â”‚  â”‚     â”œâ”€ ğŸ“„ Doc (.docx)                                     â”‚ â”‚
â”‚  â”‚     â”œâ”€ ğŸ“ Markdown (.md)                                  â”‚ â”‚
â”‚  â”‚     â”œâ”€ ğŸ“ƒ Text File (.txt)                                â”‚ â”‚
â”‚  â”‚     â””â”€ ğŸ“Š Spreadsheet (.xlsx)                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    useFileCreation Hook                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ createFile(name, type, folderId)                       â”‚ â”‚
â”‚  â”‚  â€¢ updateFile(fileId, updates, folderId)                  â”‚ â”‚
â”‚  â”‚  â€¢ deleteFile(fileId, folderId)                           â”‚ â”‚
â”‚  â”‚  â€¢ getFiles(folderId)                                     â”‚ â”‚
â”‚  â”‚  â€¢ getFile(fileId, folderId)                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      localStorage                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Key: kan_files_{workspaceId}_{folderId}                 â”‚ â”‚
â”‚  â”‚  Value: [                                                 â”‚ â”‚
â”‚  â”‚    {                                                      â”‚ â”‚
â”‚  â”‚      id: "file_123...",                                   â”‚ â”‚
â”‚  â”‚      name: "My Document",                                 â”‚ â”‚
â”‚  â”‚      type: "docx",                                        â”‚ â”‚
â”‚  â”‚      content: "<p>Hello World</p>",                       â”‚ â”‚
â”‚  â”‚      createdAt: "2025-11-13T...",                         â”‚ â”‚
â”‚  â”‚      updatedAt: "2025-11-13T..."                          â”‚ â”‚
â”‚  â”‚    }                                                      â”‚ â”‚
â”‚  â”‚  ]                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Custom Events System                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ fileCreated â†’ Update FoldersList                       â”‚ â”‚
â”‚  â”‚  â€¢ fileUpdated â†’ Refresh file data                        â”‚ â”‚
â”‚  â”‚  â€¢ fileDeleted â†’ Remove from list                         â”‚ â”‚
â”‚  â”‚  â€¢ folderCreated â†’ Refresh folders                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Modal System (useModal)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  openModal('FILE_EDITOR_DOCX', 'fileId_folderId')        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FileEditorModal Component                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ Loads file from localStorage                           â”‚ â”‚
â”‚  â”‚  â€¢ Renders appropriate editor                             â”‚ â”‚
â”‚  â”‚  â€¢ Handles save and close                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Editor Components                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TextEditor   â”‚ MarkdownEd.  â”‚ DocxEditor   â”‚ SpreadsheetEdâ”‚ â”‚
â”‚  â”‚              â”‚              â”‚              â”‚              â”‚ â”‚
â”‚  â”‚ â€¢ Plain text â”‚ â€¢ 3 views    â”‚ â€¢ TipTap     â”‚ â€¢ Grid       â”‚ â”‚
â”‚  â”‚ â€¢ Monospace  â”‚ â€¢ Preview    â”‚ â€¢ Toolbar    â”‚ â€¢ Rows/Cols  â”‚ â”‚
â”‚  â”‚ â€¢ Simple     â”‚ â€¢ GFM        â”‚ â€¢ Rich text  â”‚ â€¢ Cells      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      useAutoSave Hook                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ Debounce: 3 seconds                                    â”‚ â”‚
â”‚  â”‚  â€¢ Tracks content changes                                 â”‚ â”‚
â”‚  â”‚  â€¢ Calls onSave callback                                  â”‚ â”‚
â”‚  â”‚  â€¢ Updates localStorage via useFileCreation               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Export System                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  fileExport.ts                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ exportTextFile() â†’ .txt                               â”‚ â”‚
â”‚  â”‚  â”œâ”€ exportMarkdownFile() â†’ .md                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ exportDocxFile() â†’ .docx (HTML)                       â”‚ â”‚
â”‚  â”‚  â””â”€ exportSpreadsheetFile() â†’ .xlsx                       â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Libraries:                                               â”‚ â”‚
â”‚  â”‚  â€¢ file-saver - Download files                            â”‚ â”‚
â”‚  â”‚  â€¢ xlsx - Excel format                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
User Action: Click "Create in folder" â†’ Select file type
                        â”‚
                        â–¼
                useFileCreation.createFile()
                        â”‚
                        â”œâ”€ Generate unique ID
                        â”œâ”€ Create metadata object
                        â”œâ”€ Save to localStorage
                        â””â”€ Dispatch 'fileCreated' event
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â–¼                               â–¼
FoldersList listens          Modal opens with editor
to event & updates           (if editable file type)
        â”‚                               â”‚
        â”‚                               â–¼
        â”‚                    User edits content
        â”‚                               â”‚
        â”‚                               â–¼
        â”‚                    useAutoSave monitors changes
        â”‚                               â”‚
        â”‚                               â”œâ”€ Debounce 3 seconds
        â”‚                               â””â”€ Call onSave callback
        â”‚                               â”‚
        â”‚                               â–¼
        â”‚                    useFileCreation.updateFile()
        â”‚                               â”‚
        â”‚                               â”œâ”€ Update localStorage
        â”‚                               â””â”€ Dispatch 'fileUpdated' event
        â”‚                               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            File appears in folder list
            (Click to reopen editor)
```

## Component Hierarchy

```
Dashboard
â”œâ”€ SideNavigation
â”‚  â””â”€ FoldersList
â”‚     â”œâ”€ Folder (collapsed/expanded)
â”‚     â”‚  â”œâ”€ Folder Menu (3 dots)
â”‚     â”‚  â”‚  â””â”€ Create in folder submenu
â”‚     â”‚  â”‚     â”œâ”€ Folder
â”‚     â”‚  â”‚     â”œâ”€ List
â”‚     â”‚  â”‚     â”œâ”€ Doc (.docx)
â”‚     â”‚  â”‚     â”œâ”€ Markdown (.md)
â”‚     â”‚  â”‚     â”œâ”€ Text File (.txt)
â”‚     â”‚  â”‚     â””â”€ Spreadsheet (.xlsx)
â”‚     â”‚  â””â”€ File List (when expanded)
â”‚     â”‚     â””â”€ File Item (clickable)
â”‚     â””â”€ [More folders...]
â”‚
â””â”€ FileEditorModal (conditional)
   â””â”€ Editor (based on file type)
      â”œâ”€ TextEditor
      â”œâ”€ MarkdownEditor
      â”œâ”€ DocxEditor
      â””â”€ SpreadsheetEditor
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Application State                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  React Context (useModal)                                   â”‚
â”‚  â”œâ”€ isOpen: boolean                                         â”‚
â”‚  â”œâ”€ modalContentType: string                                â”‚
â”‚  â””â”€ entityId: string (fileId_folderId)                      â”‚
â”‚                                                             â”‚
â”‚  localStorage                                               â”‚
â”‚  â”œâ”€ kan_folders_{workspaceId}                              â”‚
â”‚  â”‚  â””â”€ Array<Folder>                                        â”‚
â”‚  â””â”€ kan_files_{workspaceId}_{folderId}                     â”‚
â”‚     â””â”€ Array<FileMetadata>                                  â”‚
â”‚                                                             â”‚
â”‚  Component State (FoldersList)                              â”‚
â”‚  â”œâ”€ folders: Folder[]                                       â”‚
â”‚  â””â”€ folderFiles: Record<string, FileMetadata[]>            â”‚
â”‚                                                             â”‚
â”‚  Component State (FileEditorModal)                          â”‚
â”‚  â””â”€ file: FileMetadata | null                              â”‚
â”‚                                                             â”‚
â”‚  Component State (Editors)                                  â”‚
â”‚  â”œâ”€ content: string | object                                â”‚
â”‚  â””â”€ hasUnsavedChanges: boolean                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Type Routing

```
File Type Selection
        â”‚
        â”œâ”€ folder â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Create nested folder
        â”‚                     (No editor)
        â”‚
        â”œâ”€ list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Create list item
        â”‚                     (No editor yet)
        â”‚
        â”œâ”€ docx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Open DocxEditor
        â”‚                     (TipTap rich text)
        â”‚
        â”œâ”€ md â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Open MarkdownEditor
        â”‚                     (Split view with preview)
        â”‚
        â”œâ”€ txt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Open TextEditor
        â”‚                     (Plain text, monospace)
        â”‚
        â””â”€ xlsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Open SpreadsheetEditor
                              (Grid with rows/columns)
```

## Auto-Save Flow

```
User types in editor
        â”‚
        â–¼
Content state updates
        â”‚
        â–¼
useAutoSave detects change
        â”‚
        â–¼
Start 3-second timer
        â”‚
        â”œâ”€ User keeps typing? â†’ Reset timer
        â”‚
        â””â”€ 3 seconds pass? â†’ Continue
                â”‚
                â–¼
        Call onSave callback
                â”‚
                â–¼
        useFileCreation.updateFile()
                â”‚
                â”œâ”€ Update localStorage
                â”œâ”€ Update timestamp
                â””â”€ Dispatch event
                â”‚
                â–¼
        Clear unsaved changes indicator
```

## Export Flow

```
User clicks "Export" button
        â”‚
        â–¼
fileExport.exportFile(file)
        â”‚
        â”œâ”€ Check file type
        â”‚
        â”œâ”€ .txt â”€â”€â†’ Create Blob â†’ saveAs()
        â”‚
        â”œâ”€ .md â”€â”€â”€â†’ Create Blob â†’ saveAs()
        â”‚
        â”œâ”€ .docx â”€â†’ Convert to HTML â†’ Create Blob â†’ saveAs()
        â”‚
        â””â”€ .xlsx â”€â†’ Use XLSX library â†’ Create workbook â†’ saveAs()
                â”‚
                â–¼
        Browser downloads file
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend Stack                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Framework: Next.js 15 + React 18                           â”‚
â”‚  Language: TypeScript (strict mode)                         â”‚
â”‚  Styling: Tailwind CSS                                      â”‚
â”‚  State: React Context + localStorage                        â”‚
â”‚                                                             â”‚
â”‚  UI Components:                                             â”‚
â”‚  â”œâ”€ @headlessui/react (Menus, Transitions)                 â”‚
â”‚  â””â”€ react-icons (HeroIcons)                                 â”‚
â”‚                                                             â”‚
â”‚  Editor Libraries:                                          â”‚
â”‚  â”œâ”€ @tiptap/react (DOCX editor)                            â”‚
â”‚  â”œâ”€ react-markdown + remark-gfm (Markdown)                 â”‚
â”‚  â”œâ”€ react-spreadsheet (Spreadsheet)                        â”‚
â”‚  â””â”€ @monaco-editor/react (Future enhancement)              â”‚
â”‚                                                             â”‚
â”‚  Export Libraries:                                          â”‚
â”‚  â”œâ”€ file-saver (Download files)                            â”‚
â”‚  â””â”€ xlsx (Excel format)                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides a scalable, maintainable foundation for the file creation feature with clear separation of concerns and reusable components.
